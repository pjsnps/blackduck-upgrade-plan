DRAFT - EXPERIMENTAL - WORK IN PROGRESS
2021-09-27

Overview
This section provides a brief overview of the upgrade plan.
1.	Planning
1.1.	Identify upgrade and production requirements
1.2.	Write post-upgrade validation test plan
1.3.	Inventory database connections
1.4.	Schedule Staging upgrade
1.5.	Open Synopsys SalesForce Case
2.	First, In Staging
2.1.	Prepare Environment
2.1.1.	Test and resolve performance issues
2.1.1.1.	Implement guidance from Best Practices, Sage, system_check.sh, sar, Zenoss 
2.1.1.2.	Customer IT team to test and resolve issues
2.1.1.2.1.	Consider: dd, pgbench, sysbench, bonnie++
2.1.2.	Remove unused data; delete, truncate/drop, cull, configure settings
2.1.3.	Vacuum analyze full bds_hub
2.1.4.	Run PostgreSQL tuning utility
2.1.5.	Backup database
2.1.6.	Create Production-like Staging environment
2.1.7.	Ensure disk space for db vacuum, migration
2.1.8.	Check memory
2.1.9.	Download upgrade-related files
2.1.10.	Schedule Staging upgrade
2.2.	Perform Upgrade
2.2.1.	Stop scanning and external connections
2.2.2.	Bring down docker stack
2.2.3.	If not already done, backup external database with prior-version hub_create_data_dump.sh
2.2.4.	Optional: upgrade OS, kernel 
2.2.5.	Optional: upgrade Docker with yum
2.2.6.	Optional: satisfy other requirements, objectives. 
2.2.7.	Deploy docker migration stack
2.2.8.	Restore database with prior-version hub_db_migrate.sh
2.2.9.	Vacuum audit_event table
2.2.10.	Optional, upgrade PostgreSQL
2.2.10.1.	Bring down docker stack
2.2.10.2.	Upgrade PostgeSQL
2.2.11.	Deploy Black Duck with new version Production deployment .yml files
2.3.	Post-Upgrade Steps
2.3.1.	Run upgrade-validation tests
2.3.2.	Re-run benchmark tests
2.3.3.	Announce upgrade completion to stakeholders
3.	Then, In Production
3.1.	Schedule and repeat “In Staging” steps as above
